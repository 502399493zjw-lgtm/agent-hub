# Agent Hub 经济系统设计

> 版本：v0.1 | 2026-02-19

---

## 一、核心理念

**让好东西浮上来，让烂东西自然消亡，让维护者有动力持续维护。**

不搞虚拟货币、不搞付费墙（初期）。纯粹用行为信号驱动的声望经济。

---

## 二、角色模型

同一个账号同时扮演三种角色（共享账号模型）：

- **创作者（Publisher）** — 发布 Skill/Plugin/Workflow 等资产
- **使用者（User）** — 安装、评价、提 Issue、升级版本
- **策展者（Curator）** — Fork 改进、写 Review、维护 Collection

---

## 三、行为信号体系

### 3.1 资产侧信号（衡量一个 Skill 好不好）

| 信号 | 权重 | 说明 |
|------|------|------|
| 📥 Install | 高 | 真实安装次数（去重，按用户计） |
| ⭐ Star | 中 | 收藏/认可 |
| 🔀 Fork | 中 | 有人基于它二创 = 有价值 |
| 📝 Review 评分 | 中 | 仅安装用户可评（1-5 星 + 文字） |
| 🐛 Issue 关闭率 | 中 | Closed / Total，衡量维护质量 |
| ⏱️ Issue 响应时间 | 低 | 首次回复的中位时间 |
| 📦 版本更新频率 | 低 | 最近 90 天内发版次数 |
| 🔗 被依赖数 | 低 | 多少其他资产依赖这个 |
| 🔄 升级率 | 中 | 新版本发布后，已安装用户的升级比例 |

### 3.2 用户侧信号（衡量一个人的贡献）

| 行为 | 获得积分 | 说明 |
|------|----------|------|
| 发布资产 | +10 | 每发布一个新资产 |
| 资产被 Install | +1/次 | 每被安装一次 |
| 资产被 Star | +1/次 | 每被收藏一次 |
| 关闭 Issue | +3 | 解决了一个问题 |
| 回复 Issue | +1 | 参与维护 |
| 写 Review | +2 | 安装后写评价 |
| Fork 并发布 | +5 | 二创贡献 |
| 发布新版本 | +5 | 持续维护 |
| 提交 PR 修复 Issue | +8 | 贡献代码解决问题（高于普通关闭） |

---

## 四、Hub Score（资产综合分）

一个 **0-100** 的分数，用户一眼看懂。

```
Hub Score = 热度分 × 0.35 + 口碑分 × 0.35 + 维护分 × 0.30
```

### 4.1 热度分（Popularity）0-100
- Install_30d × 60% + Star × 25% + Fork × 15%
- 对数平滑：`log(1 + count)` 避免大者恒大
- 归一化到 0-100

### 4.2 口碑分（Quality）0-100
- Review 均分 × 权重（评价数越多权重越高）
- 少于 5 条评价则降权（信息不足）
- 归一化到 0-100

### 4.3 维护分（Maintenance）0-100
- Issue 关闭率 × 30%
- 平均响应时间 × 20%（越快越高）
- 最近更新时间 × 20%（90 天内满分，超过递减）
- 升级率 × 30%（新版本发布后用户跟进升级的比例）
- 归一化到 0-100

**详情页展开后可看各子维度**，类似淘宝店铺评分——看到 82 分知道靠谱，点进去看物流/服务/质量分项。

---

## 五、Issue ↔ PR 关联系统

### 5.1 工作流

1. 用户（或维护者自己）提 Issue，描述问题或需求
2. 贡献者提交 PR（Pull Request），在描述中关联 Issue（如 `fixes #12`）
3. PR 被合并 → Issue 自动关闭
4. Issue 详情页展示：修复者信息 + 改动文件列表 + diff 链接

### 5.2 积分规则

| 场景 | 积分 |
|------|------|
| 维护者自己修复 + 关联 PR | +3（关闭 Issue）+ 5（发版）= +8 |
| 外部贡献者提 PR 修复 | +8（PR 修复）+ 3（关闭 Issue 归维护者）|
| 纯手动关闭（无 PR） | +3 |

### 5.3 展示

Issue 页面显示完整链路：
```
Issue #12: 安装后报错 xxx
  └── PR #15 by @contributor (fixes #12)
       └── 改动文件: SKILL.md, scripts/run.sh
       └── 状态: ✅ Merged → Issue Closed
```

---

## 六、版本更新 & 升级率

### 6.1 版本发布

- 每次发版记录版本号、更新日志（changelog）
- 资产详情页展示版本历史时间线

### 6.2 升级率（Upgrade Rate）

```
升级率 = 30天内升级到最新版的用户数 / 总安装用户数
```

- 升级率高 = 用户信任、愿意跟进 → 隐性质量信号
- 升级率低 = 可能新版本有问题，或用户已放弃
- 纳入维护分计算（权重 30%）

### 6.3 展示

资产详情页的版本区域：
```
v2.1.0 (最新) — 发布于 2 天前
  📥 156 用户已升级 (78% 升级率)
  📝 修复了 3 个 Issue，新增 2 个功能

v2.0.0 — 发布于 30 天前
  📥 200 安装
```

---

## 七、时间衰减机制

解决"僵尸项目占坑"问题：

| 规则 | 阈值 | 效果 |
|------|------|------|
| Install 热度 | 只算近 30 天 | 过期不计入排名 |
| 维护分 | 90 天未更新开始扣分 | 180 天归零 |
| ⚠️ Unmaintained 标记 | 90 天未更新 + 有 Open Issue | 自动标记 |
| 资产不删除 | 永久 | 老资产可用可搜，只是排名下沉 |

**效果：想保持排名就得持续维护。不维护也没关系，但别挡路。**

---

## 八、贡献者等级

| 等级 | 累计积分 | 徽章 | 特权 |
|------|----------|------|------|
| 🌱 Newcomer | 0+ | — | 基础发布 |
| ⚡ Active | 50+ | 闪电 | 资产显示徽章 |
| 🔥 Contributor | 200+ | 火焰 | 可创建官方 Collection |
| 💎 Master | 1000+ | 钻石 | 资产获得推荐权重加成 |
| 👑 Legend | 5000+ | 皇冠 | 社区治理投票权 |

连续 60 天不活跃 → 等级冻结（不降级但不显示活跃标记）。

---

## 九、发现机制（流量分配）

| 榜单 | 排序依据 |
|------|----------|
| 🔥 Trending | 近 7 天 Install 增速最快 |
| 🏆 Top Rated | Hub Score 排行 |
| 🆕 New & Notable | 新发布 + Hub Score > 60 |
| 🔧 Well Maintained | 维护分 > 80 |
| ⭐ Editor's Pick | 人工策展（初期我们选，后期 Master+ 可推荐） |

---

## 十、反作弊

- 同账号重复 Install 不计数
- 新注册账号 24h 内的 Star/Install 降权
- Review 需安装后 24h 才能提交
- 异常 Install 峰值自动标记人工审核

---

## 十一、未来扩展（现在不做）

- 💰 付费资产（分成模式）
- 🏆 赏金 Issue（悬赏解决问题）
- 🤝 协作维护（多人共同维护一个资产）
- 📊 创作者数据看板（Install 来源、用户画像）

---

_由小跃起草，指挥官审定_
