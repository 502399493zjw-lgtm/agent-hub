(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84230,e=>{"use strict";function s(e){return e>=1e3?(e/1e3).toFixed(1)+"k":e.toString()}e.s(["formatDownloads",()=>s,"typeConfig",0,{template:{label:"åˆé›†",icon:"",color:"text-emerald-400",bgColor:"bg-emerald-400/10",borderColor:"border-emerald-400/30"},skill:{label:"æŠ€èƒ½",icon:"",color:"text-blue",bgColor:"bg-blue/10",borderColor:"border-blue/30"},config:{label:"é…ç½®",icon:"",color:"text-red",bgColor:"bg-red/10",borderColor:"border-red/30"},plugin:{label:"å·¥å…·",icon:"",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/30"},trigger:{label:"è§¦å‘å™¨",icon:"",color:"text-cyan-400",bgColor:"bg-cyan-400/10",borderColor:"border-cyan-400/30"},channel:{label:"é€šä¿¡å™¨",icon:"",color:"text-purple-400",bgColor:"bg-purple-400/10",borderColor:"border-purple-400/30"}}])},30257,e=>{"use strict";var s=e.i(18050),t=e.i(71645),r=e.i(22016),l=e.i(94690),a=e.i(84230);let d=["å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­","å‘¨æ—¥"],n=[2340,3120,2890,4210,3870,5120,4560],o=Math.max(...n);function i({icon:e,label:t,value:r,sub:l}){return(0,s.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-5 card-hover",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e}),(0,s.jsx)("span",{className:"text-sm text-muted",children:t})]}),(0,s.jsx)("div",{className:"text-3xl font-bold font-mono text-blue ",children:r}),l&&(0,s.jsx)("div",{className:"text-xs text-muted mt-1",children:l})]})}function c({asset:e}){let t=a.typeConfig[e.type];return(0,s.jsx)(r.default,{href:`/asset/${e.id}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-card-hover transition-colors cursor-pointer group",children:[(0,s.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full border ${t.bgColor} ${t.borderColor} ${t.color} whitespace-nowrap`,children:[t.icon," ",t.label]}),(0,s.jsx)("span",{className:"flex-1 text-sm font-medium group-hover:text-blue transition-colors truncate",children:e.displayName}),(0,s.jsxs)("span",{className:"text-xs text-muted font-mono",children:["v",e.version]}),(0,s.jsxs)("span",{className:"text-xs text-muted font-mono w-16 text-right",children:["â¬‡ï¸ ",(0,a.formatDownloads)(e.downloads)]}),(0,s.jsx)("span",{className:"text-xs text-muted font-mono w-12 text-right",children:e.issueCount>0?(0,s.jsxs)("span",{className:e.issueCount>5?"text-red":"text-muted",children:["ðŸ› ",e.issueCount]}):(0,s.jsx)("span",{className:"text-green-500",children:"âœ“"})})]})})}function x({comment:e,assets:t}){let l=t.find(s=>s.id===e.assetId),a="agent"===e.commenterType;return(0,s.jsxs)("div",{className:`p-3 rounded-lg border ${a?"border-purple-500/20 bg-purple-500/5":"border-card-border bg-white/50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,s.jsx)("span",{className:"text-sm",children:e.userAvatar}),(0,s.jsxs)("span",{className:`text-xs font-medium ${a?"text-purple-400":"text-foreground"}`,children:[e.userName,a&&(0,s.jsx)("span",{className:"ml-1 text-[10px] text-purple-400/70",children:"ðŸ¤– Agent"})]}),(0,s.jsx)("span",{className:"text-[10px] text-muted ml-auto",children:e.createdAt})]}),(0,s.jsx)("p",{className:"text-xs text-muted line-clamp-2 mb-1",children:e.content}),l&&(0,s.jsxs)(r.default,{href:`/asset/${l.id}`,className:"text-[10px] text-blue hover:text-blue-dim transition-colors",children:["â†’ ",l.displayName]})]})}function m({issue:e,assets:t}){let l=t.find(s=>s.id===e.assetId),a="open"===e.status,d="agent"===e.authorType;return(0,s.jsxs)("div",{className:"p-3 rounded-lg border border-card-border bg-white/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,s.jsx)("span",{className:`w-2 h-2 rounded-full ${a?"bg-green-500":"bg-muted"}`}),(0,s.jsx)("span",{className:"text-xs font-medium text-foreground flex-1 truncate",children:e.title}),(0,s.jsx)("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${a?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-muted/10 text-muted border border-card-border"}`,children:a?"Open":"Closed"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-muted",children:[(0,s.jsxs)("span",{className:d?"text-purple-400":"",children:[e.authorAvatar," ",e.authorName,d&&" ðŸ¤–"]}),(0,s.jsx)("span",{children:"Â·"}),(0,s.jsx)("span",{children:e.createdAt}),(0,s.jsx)("span",{children:"Â·"}),(0,s.jsxs)("span",{children:["ðŸ’¬ ",e.commentCount]}),e.labels.map(e=>(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-surface border border-card-border text-muted",children:e},e))]}),l&&(0,s.jsxs)(r.default,{href:`/asset/${l.id}`,className:"text-[10px] text-blue hover:text-blue-dim transition-colors mt-1 inline-block",children:["â†’ ",l.displayName]})]})}function u(){let{user:e,isLoading:u}=(0,l.useAuth)(),[h,b]=(0,t.useState)([]),[p,g]=(0,t.useState)([]),[j,f]=(0,t.useState)([]),[N,v]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{fetch("/api/dashboard").then(e=>e.json()).then(e=>{e.success&&e.data&&(b(e.data.assets||[]),g(e.data.comments||[]),f(e.data.issues||[]))}).catch(e=>console.error("Failed to fetch dashboard data:",e)).finally(()=>v(!1))},[]),u||N)return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-4 animate-pulse",children:"ðŸ“¦"}),(0,s.jsx)("p",{className:"text-muted",children:"åŠ è½½ä¸­..."})]})})]});if(!e)return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ”’"}),(0,s.jsx)("p",{className:"text-muted mb-4",children:"è¯·å…ˆç™»å½•ä»¥æŸ¥çœ‹ Dashboard"}),(0,s.jsx)(r.default,{href:"/",className:"text-blue hover:text-blue-dim transition-colors",children:"è¿”å›žé¦–é¡µ"})]})})]});let w=h.filter(s=>s.author.id===e.id),y=w.reduce((e,s)=>e+s.downloads,0),C=new Set(w.map(e=>e.id)),$=p.filter(e=>C.has(e.assetId)).slice(0,5),S=j.filter(e=>C.has(e.assetId)).slice(0,5);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,s.jsx)("div",{className:"absolute top-0 left-1/4 w-[600px] h-[400px] bg-blue/3 rounded-full blur-[120px] pointer-events-none"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-1/4 w-[400px] h-[300px] bg-red/3 rounded-full blur-[100px] pointer-events-none"}),(0,s.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6 mb-10",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full border-2 border-blue/30 bg-blue/10 flex items-center justify-center text-3xl overflow-hidden",children:e.avatar?.startsWith("http")?(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}):e.avatar||"ðŸ‘¤"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold",children:[(0,s.jsx)("span",{className:"text-blue",children:e.name}),(0,s.jsx)("span",{className:"text-muted text-lg ml-3",children:"Dashboard"})]}),(0,s.jsx)("p",{className:"text-sm text-muted mt-1",children:e.email||""})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)(r.default,{href:"/publish",className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue/10 border border-blue/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸš€"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold group-hover:text-blue transition-colors",children:"å‘å¸ƒæ–°èµ„äº§"}),(0,s.jsx)("div",{className:"text-xs text-muted",children:"åˆ†äº«ä½ çš„åˆ›ä½œ"})]})]}),(0,s.jsxs)("a",{href:"#issues-section",className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red/10 border border-red/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸ›"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold group-hover:text-red transition-colors",children:"æŸ¥çœ‹å…¨éƒ¨ Issues"}),(0,s.jsxs)("div",{className:"text-xs text-muted",children:[S.length," ä¸ªå¾…å¤„ç†"]})]})]}),(0,s.jsxs)(r.default,{href:`/user/${e.id}`,className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-400/10 border border-blue-400/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸ‘¤"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold group-hover:text-blue-400 transition-colors",children:"ç®¡ç† Profile"}),(0,s.jsx)("div",{className:"text-xs text-muted",children:"ç¼–è¾‘ä¸ªäººä¿¡æ¯"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,s.jsx)(i,{icon:"ðŸ“¦",label:"å·²å‘å¸ƒç»„ä»¶",value:w.length,sub:`${new Set(w.map(e=>e.type)).size} ç§ç±»åž‹`}),(0,s.jsx)(i,{icon:"â¬‡ï¸",label:"æ€»ä¸‹è½½é‡",value:(0,a.formatDownloads)(y),sub:"ç´¯è®¡æ‰€æœ‰ç»„ä»¶"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold",children:["ðŸ“¦ ",(0,s.jsx)("span",{className:"text-blue",children:"æˆ‘çš„ç»„ä»¶"})]}),(0,s.jsxs)("span",{className:"text-xs text-muted font-mono",children:[w.length," ä¸ª"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:w.length>0?w.sort((e,s)=>s.downloads-e.downloads).map(e=>(0,s.jsx)(c,{asset:e},e.id)):(0,s.jsx)("p",{className:"text-sm text-muted text-center py-8",children:"è¿˜æ²¡æœ‰å‘å¸ƒç»„ä»¶ï¼ŒåŽ»å‘å¸ƒç¬¬ä¸€ä¸ªå§ï¼"})})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold mb-6",children:["ðŸ“ˆ ",(0,s.jsx)("span",{className:"text-blue",children:"è¿‘ 7 å¤©ä¸‹è½½è¶‹åŠ¿"})]}),(0,s.jsx)("div",{className:"flex items-end gap-3 h-40",children:n.map((e,t)=>(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,s.jsx)("span",{className:"text-[10px] text-muted font-mono",children:(0,a.formatDownloads)(e)}),(0,s.jsx)("div",{className:"w-full relative rounded-t-md overflow-hidden",style:{height:`${e/o*100}%`},children:(0,s.jsx)("div",{className:"absolute inset-0 rounded-t-md",style:{background:"linear-gradient(to top, rgba(255,215,0,0.3), rgba(255,215,0,0.7))",boxShadow:"0 0 10px rgba(255,215,0,0.2)"}})}),(0,s.jsx)("span",{className:"text-[10px] text-muted",children:d[t]})]},t))}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-card-border flex items-center justify-between text-xs text-muted",children:[(0,s.jsxs)("span",{children:["æœ¬å‘¨æ€»è®¡ï¼š",(0,s.jsx)("span",{className:"text-blue font-mono font-bold",children:(0,a.formatDownloads)(n.reduce((e,s)=>e+s,0))})]}),(0,s.jsxs)("span",{children:["æ—¥å‡ï¼š",(0,s.jsx)("span",{className:"text-blue font-mono",children:(0,a.formatDownloads)(Math.round(n.reduce((e,s)=>e+s,0)/7))})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["ðŸ’¬ ",(0,s.jsx)("span",{className:"text-blue",children:"æœ€è¿‘è¯„è®º"})]}),(0,s.jsx)("div",{className:"space-y-3",children:$.length>0?$.map(e=>(0,s.jsx)(x,{comment:e,assets:h},e.id)):(0,s.jsx)("p",{className:"text-sm text-muted text-center py-4",children:"æš‚æ— è¯„è®º"})})]}),(0,s.jsxs)("div",{id:"issues-section",className:"rounded-lg border border-card-border bg-white p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["ðŸ› ",(0,s.jsx)("span",{className:"text-blue",children:"æœ€è¿‘ Issue"})]}),(0,s.jsx)("div",{className:"space-y-3",children:S.length>0?S.map(e=>(0,s.jsx)(m,{issue:e,assets:h},e.id)):(0,s.jsx)("p",{className:"text-sm text-muted text-center py-4",children:"æš‚æ—  Issue"})})]})]})]})]})]})}e.s(["default",()=>u])}]);