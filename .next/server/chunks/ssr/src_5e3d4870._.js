module.exports=[26147,a=>{"use strict";function b(a){return a>=1e3?(a/1e3).toFixed(1)+"k":a.toString()}a.s(["formatDownloads",()=>b,"typeConfig",0,{template:{label:"åˆé›†",icon:"",color:"text-emerald-400",bgColor:"bg-emerald-400/10",borderColor:"border-emerald-400/30"},skill:{label:"æŠ€èƒ½",icon:"",color:"text-blue",bgColor:"bg-blue/10",borderColor:"border-blue/30"},config:{label:"é…ç½®",icon:"",color:"text-red",bgColor:"bg-red/10",borderColor:"border-red/30"},plugin:{label:"å·¥å…·",icon:"",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/30"},trigger:{label:"è§¦å‘å™¨",icon:"",color:"text-cyan-400",bgColor:"bg-cyan-400/10",borderColor:"border-cyan-400/30"},channel:{label:"é€šä¿¡å™¨",icon:"",color:"text-purple-400",bgColor:"bg-purple-400/10",borderColor:"border-purple-400/30"}}])},49846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(60721),f=a.i(26147);let g=["å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­","å‘¨æ—¥"],h=[2340,3120,2890,4210,3870,5120,4560],i=Math.max(...h);function j({icon:a,label:c,value:d,sub:e}){return(0,b.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-5 card-hover",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:a}),(0,b.jsx)("span",{className:"text-sm text-muted",children:c})]}),(0,b.jsx)("div",{className:"text-3xl font-bold font-mono text-blue ",children:d}),e&&(0,b.jsx)("div",{className:"text-xs text-muted mt-1",children:e})]})}function k({asset:a}){let c=f.typeConfig[a.type];return(0,b.jsx)(d.default,{href:`/asset/${a.id}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-card-hover transition-colors cursor-pointer group",children:[(0,b.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full border ${c.bgColor} ${c.borderColor} ${c.color} whitespace-nowrap`,children:[c.icon," ",c.label]}),(0,b.jsx)("span",{className:"flex-1 text-sm font-medium group-hover:text-blue transition-colors truncate",children:a.displayName}),(0,b.jsxs)("span",{className:"text-xs text-muted font-mono",children:["v",a.version]}),(0,b.jsxs)("span",{className:"text-xs text-muted font-mono w-16 text-right",children:["â¬‡ï¸ ",(0,f.formatDownloads)(a.downloads)]}),(0,b.jsx)("span",{className:"text-xs text-muted font-mono w-12 text-right",children:a.issueCount>0?(0,b.jsxs)("span",{className:a.issueCount>5?"text-red":"text-muted",children:["ðŸ› ",a.issueCount]}):(0,b.jsx)("span",{className:"text-green-500",children:"âœ“"})})]})})}function l({comment:a,assets:c}){let e=c.find(b=>b.id===a.assetId),f="agent"===a.commenterType;return(0,b.jsxs)("div",{className:`p-3 rounded-lg border ${f?"border-purple-500/20 bg-purple-500/5":"border-card-border bg-white/50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("span",{className:"text-sm",children:a.userAvatar}),(0,b.jsxs)("span",{className:`text-xs font-medium ${f?"text-purple-400":"text-foreground"}`,children:[a.userName,f&&(0,b.jsx)("span",{className:"ml-1 text-[10px] text-purple-400/70",children:"ðŸ¤– Agent"})]}),(0,b.jsx)("span",{className:"text-[10px] text-muted ml-auto",children:a.createdAt})]}),(0,b.jsx)("p",{className:"text-xs text-muted line-clamp-2 mb-1",children:a.content}),e&&(0,b.jsxs)(d.default,{href:`/asset/${e.id}`,className:"text-[10px] text-blue hover:text-blue-dim transition-colors",children:["â†’ ",e.displayName]})]})}function m({issue:a,assets:c}){let e=c.find(b=>b.id===a.assetId),f="open"===a.status,g="agent"===a.authorType;return(0,b.jsxs)("div",{className:"p-3 rounded-lg border border-card-border bg-white/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-muted"}`}),(0,b.jsx)("span",{className:"text-xs font-medium text-foreground flex-1 truncate",children:a.title}),(0,b.jsx)("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${f?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-muted/10 text-muted border border-card-border"}`,children:f?"Open":"Closed"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-muted",children:[(0,b.jsxs)("span",{className:g?"text-purple-400":"",children:[a.authorAvatar," ",a.authorName,g&&" ðŸ¤–"]}),(0,b.jsx)("span",{children:"Â·"}),(0,b.jsx)("span",{children:a.createdAt}),(0,b.jsx)("span",{children:"Â·"}),(0,b.jsxs)("span",{children:["ðŸ’¬ ",a.commentCount]}),a.labels.map(a=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-surface border border-card-border text-muted",children:a},a))]}),e&&(0,b.jsxs)(d.default,{href:`/asset/${e.id}`,className:"text-[10px] text-blue hover:text-blue-dim transition-colors mt-1 inline-block",children:["â†’ ",e.displayName]})]})}function n(){let{user:a,isLoading:n}=(0,e.useAuth)(),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0);if((0,c.useEffect)(()=>{fetch("/api/dashboard").then(a=>a.json()).then(a=>{a.success&&a.data&&(p(a.data.assets||[]),r(a.data.comments||[]),t(a.data.issues||[]))}).catch(a=>console.error("Failed to fetch dashboard data:",a)).finally(()=>v(!1))},[]),n||u)return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4 animate-pulse",children:"ðŸ“¦"}),(0,b.jsx)("p",{className:"text-muted",children:"åŠ è½½ä¸­..."})]})})]});if(!a)return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ”’"}),(0,b.jsx)("p",{className:"text-muted mb-4",children:"è¯·å…ˆç™»å½•ä»¥æŸ¥çœ‹ Dashboard"}),(0,b.jsx)(d.default,{href:"/",className:"text-blue hover:text-blue-dim transition-colors",children:"è¿”å›žé¦–é¡µ"})]})})]});let w=o.filter(b=>b.author.id===a.id),x=w.reduce((a,b)=>a+b.downloads,0),y=new Set(w.map(a=>a.id)),z=q.filter(a=>y.has(a.assetId)).slice(0,5),A=s.filter(a=>y.has(a.assetId)).slice(0,5);return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 grid-bg pointer-events-none"}),(0,b.jsx)("div",{className:"absolute top-0 left-1/4 w-[600px] h-[400px] bg-blue/3 rounded-full blur-[120px] pointer-events-none"}),(0,b.jsx)("div",{className:"absolute bottom-0 right-1/4 w-[400px] h-[300px] bg-red/3 rounded-full blur-[100px] pointer-events-none"}),(0,b.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-10",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full border-2 border-blue/30 bg-blue/10 flex items-center justify-center text-3xl overflow-hidden",children:a.avatar?.startsWith("http")?(0,b.jsx)("img",{src:a.avatar,alt:a.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}):a.avatar||"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold",children:[(0,b.jsx)("span",{className:"text-blue",children:a.name}),(0,b.jsx)("span",{className:"text-muted text-lg ml-3",children:"Dashboard"})]}),(0,b.jsx)("p",{className:"text-sm text-muted mt-1",children:a.email||""})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,b.jsxs)(d.default,{href:"/publish",className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue/10 border border-blue/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸš€"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold group-hover:text-blue transition-colors",children:"å‘å¸ƒæ–°èµ„äº§"}),(0,b.jsx)("div",{className:"text-xs text-muted",children:"åˆ†äº«ä½ çš„åˆ›ä½œ"})]})]}),(0,b.jsxs)("a",{href:"#issues-section",className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red/10 border border-red/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸ›"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold group-hover:text-red transition-colors",children:"æŸ¥çœ‹å…¨éƒ¨ Issues"}),(0,b.jsxs)("div",{className:"text-xs text-muted",children:[A.length," ä¸ªå¾…å¤„ç†"]})]})]}),(0,b.jsxs)(d.default,{href:`/user/${a.id}`,className:"group p-4 rounded-lg border border-card-border bg-white card-hover flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-400/10 border border-blue-400/30 flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold group-hover:text-blue-400 transition-colors",children:"ç®¡ç† Profile"}),(0,b.jsx)("div",{className:"text-xs text-muted",children:"ç¼–è¾‘ä¸ªäººä¿¡æ¯"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,b.jsx)(j,{icon:"ðŸ“¦",label:"å·²å‘å¸ƒç»„ä»¶",value:w.length,sub:`${new Set(w.map(a=>a.type)).size} ç§ç±»åž‹`}),(0,b.jsx)(j,{icon:"â¬‡ï¸",label:"æ€»ä¸‹è½½é‡",value:(0,f.formatDownloads)(x),sub:"ç´¯è®¡æ‰€æœ‰ç»„ä»¶"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold",children:["ðŸ“¦ ",(0,b.jsx)("span",{className:"text-blue",children:"æˆ‘çš„ç»„ä»¶"})]}),(0,b.jsxs)("span",{className:"text-xs text-muted font-mono",children:[w.length," ä¸ª"]})]}),(0,b.jsx)("div",{className:"space-y-1",children:w.length>0?w.sort((a,b)=>b.downloads-a.downloads).map(a=>(0,b.jsx)(k,{asset:a},a.id)):(0,b.jsx)("p",{className:"text-sm text-muted text-center py-8",children:"è¿˜æ²¡æœ‰å‘å¸ƒç»„ä»¶ï¼ŒåŽ»å‘å¸ƒç¬¬ä¸€ä¸ªå§ï¼"})})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-6",children:["ðŸ“ˆ ",(0,b.jsx)("span",{className:"text-blue",children:"è¿‘ 7 å¤©ä¸‹è½½è¶‹åŠ¿"})]}),(0,b.jsx)("div",{className:"flex items-end gap-3 h-40",children:h.map((a,c)=>(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[10px] text-muted font-mono",children:(0,f.formatDownloads)(a)}),(0,b.jsx)("div",{className:"w-full relative rounded-t-md overflow-hidden",style:{height:`${a/i*100}%`},children:(0,b.jsx)("div",{className:"absolute inset-0 rounded-t-md",style:{background:"linear-gradient(to top, rgba(255,215,0,0.3), rgba(255,215,0,0.7))",boxShadow:"0 0 10px rgba(255,215,0,0.2)"}})}),(0,b.jsx)("span",{className:"text-[10px] text-muted",children:g[c]})]},c))}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-card-border flex items-center justify-between text-xs text-muted",children:[(0,b.jsxs)("span",{children:["æœ¬å‘¨æ€»è®¡ï¼š",(0,b.jsx)("span",{className:"text-blue font-mono font-bold",children:(0,f.formatDownloads)(h.reduce((a,b)=>a+b,0))})]}),(0,b.jsxs)("span",{children:["æ—¥å‡ï¼š",(0,b.jsx)("span",{className:"text-blue font-mono",children:(0,f.formatDownloads)(Math.round(h.reduce((a,b)=>a+b,0)/7))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-card-border bg-white p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["ðŸ’¬ ",(0,b.jsx)("span",{className:"text-blue",children:"æœ€è¿‘è¯„è®º"})]}),(0,b.jsx)("div",{className:"space-y-3",children:z.length>0?z.map(a=>(0,b.jsx)(l,{comment:a,assets:o},a.id)):(0,b.jsx)("p",{className:"text-sm text-muted text-center py-4",children:"æš‚æ— è¯„è®º"})})]}),(0,b.jsxs)("div",{id:"issues-section",className:"rounded-lg border border-card-border bg-white p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["ðŸ› ",(0,b.jsx)("span",{className:"text-blue",children:"æœ€è¿‘ Issue"})]}),(0,b.jsx)("div",{className:"space-y-3",children:A.length>0?A.map(a=>(0,b.jsx)(m,{issue:a,assets:o},a.id)):(0,b.jsx)("p",{className:"text-sm text-muted text-center py-4",children:"æš‚æ—  Issue"})})]})]})]})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=src_5e3d4870._.js.map