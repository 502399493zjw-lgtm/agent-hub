{"version":3,"sources":["../../../../src/app/user/%5Bid%5D/client.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/user/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/user/[id]/client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/user/[id]/client.tsx\",\n    \"default\",\n);\n","import { getUserProfile, listAssets, getEvolutionEventsByUserId, getActivityEventsByUserId, listUserProfileIds, getUserProviderInfo } from '@/lib/db';\nimport UserProfileClient from './client';\nimport type { Metadata } from 'next';\n\nexport const dynamic = 'force-dynamic';\nimport type { EvolutionEvent, ActivityEvent } from '@/data/types';\n\nexport function generateStaticParams() {\n  return listUserProfileIds().map(id => ({ id }));\n}\n\nexport async function generateMetadata({ params }: { params: Promise<{ id: string }> }): Promise<Metadata> {\n  const { id } = await params;\n  const user = getUserProfile(id);\n  if (!user) {\n    return { title: '用户未找到 — 水产市场' };\n  }\n  return {\n    title: `${user.name} — 水产市场`,\n    description: user.bio || `${user.name} 的个人主页`,\n    openGraph: {\n      title: `${user.name} — 水产市场`,\n      description: user.bio || `${user.name} 的个人主页`,\n      type: 'profile',\n    },\n  };\n}\n\nexport default async function UserProfilePage({ params }: { params: Promise<{ id: string }> }) {\n  const { id } = await params;\n  const user = getUserProfile(id);\n\n  // Get published assets from DB by matching author_id\n  const dbResult = listAssets({ pageSize: 100 });\n  const publishedAssets = user\n    ? dbResult.assets.filter(a => user.publishedAssets.includes(a.id) || a.author.id === id)\n    : [];\n\n  const evolutionEvents = getEvolutionEventsByUserId(id) as EvolutionEvent[];\n  const activityEvents = getActivityEventsByUserId(id) as ActivityEvent[];\n\n  // Get OAuth provider info (Agent owner)\n  const providerInfo = getUserProviderInfo(id);\n\n  return (\n    <UserProfileClient\n      id={id}\n      initialUser={user}\n      initialPublished={publishedAssets}\n      initialEvolutionEvents={evolutionEvents}\n      initialActivityEvents={activityEvents}\n      ownerInfo={providerInfo}\n    />\n  );\n}\n"],"names":[],"mappings":"mdAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,8RAAgS,EAC7T,6DACA,gEAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,0QAA4Q,EACzS,yCACA,8GCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMO,SAAS,IACd,MAAO,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAAG,GAAG,CAAC,IAAO,CAAD,GAAG,CAAG,CAAC,EAC/C,CAEO,eAAe,EAAiB,QAAE,CAAM,CAAuC,EACpF,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAO,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,UAC5B,AAAK,EAGE,CACL,CAJE,EAAO,GAIF,CAAA,EAAG,EAAK,IAAI,CAAC,OAAO,CAAC,CAC5B,YAAa,EAAK,GAAG,EAAI,CAAA,EAAG,EAAK,IAAI,CAAC,MAAM,CAAC,CAC7C,UAAW,CACT,MAAO,CAAA,EAAG,EAAK,IAAI,CAAC,OAAO,CAAC,CAC5B,YAAa,EAAK,GAAG,EAAI,CAAA,EAAG,EAAK,IAAI,CAAC,MAAM,CAAC,CAC7C,KAAM,SACR,CACF,EAVS,CAAE,MAAO,cAAe,CAWnC,CAEe,eAAe,EAAgB,QAAE,CAAM,CAAuC,EAC3F,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAO,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAGtB,EAAW,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,CAAE,SAAU,GAAI,GACtC,EAAkB,EACpB,EAAS,MAAM,CAAC,MAAM,CAAC,GAAK,EAAK,eAAe,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAK,EAAE,MAAM,CAAC,EAAE,GAAK,GACnF,EAAE,CAEA,EAAkB,CAAA,EAAA,EAAA,0BAAA,AAA0B,EAAC,GAC7C,EAAiB,CAAA,EAAA,EAAA,yBAAA,AAAyB,EAAC,GAG3C,EAAe,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,GAEzC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAiB,CAAA,CAChB,GAAI,EACJ,YAAa,EACb,iBAAkB,EAClB,uBAAwB,EACxB,sBAAuB,EACvB,UAAW,GAGjB,kCAlDuB","ignoreList":[0]}